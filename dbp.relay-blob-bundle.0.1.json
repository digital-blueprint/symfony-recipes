{
    "manifests": {
        "dbp/relay-blob-bundle": {
            "manifest": {
                "bundles": {
                    "Dbp\\Relay\\BlobBundle\\DbpRelayBlobBundle": [
                        "all"
                    ]
                },
                "copy-from-recipe": {
                    "config/": "%CONFIG_DIR%/"
                },
                "env": {
                    "BLOB_DATABASE_URL": "mysql://user:secret@mariadb:3306/db",
                    "BLOB_LINK_URL": "http://127.0.0.1:8000/",
                    "BLOB_REPORTING_INTERVAL": "0 11 * * MON",
                    "BLOB_MAILER_TRANSPORT_DSN": "sendmail://default"
                }
            },
            "files": {
                "config/packages/dbp_relay_blob.yaml": {
                    "contents": [
                        "dbp_relay_blob:",
                        "  database_url: '%env(BLOB_DATABASE_URL)%'",
                        "  link_url: '%env(BLOB_LINK_URL)%'",
                        "  reporting_interval: '%env(BLOB_REPORTING_INTERVAL)%'",
                        "  cleanup_interval: '*/5 * * * *'",
                        "  file_integrity_checks: false # if file integrity checks should be performed periodically",
                        "  integrity_check_interval: \"0 0 1 * *\" # when integrity check cronjob should run",
                        "  buckets:",
                        "      test_bucket:",
                        "          service: 'Dbp\\Relay\\BlobConnectorFilesystemBundle\\Service\\FilesystemService'",
                        "          bucket_id: '1234'",
                        "          bucket_name: 'Test bucket'",
                        "          key: 'oaYdaVWxSF8qSk73ewCMQktKhvriYSxvPBudrUQ5qSmFt334FfebTfmQZmFLaruB'",
                        "          quota: 500 # in MB",
                        "          notify_when_quota_over: 70 # in percent of the quota",
                        "          report_when_expiry_in: 'P62D' # in Days, 62 = two 31 day months",
                        "          bucket_owner: 'email@some-mail-server.com'",
                        "          max_retention_duration: 'P60D'",
                        "          link_expire_time: 'PT1M'",
                        "          policies:",
                        "              create: true",
                        "              delete: true",
                        "              open: true",
                        "              download: true",
                        "              rename: true",
                        "              work: true",
                        "          notify_quota:",
                        "              dsn: '%env(BLOB_MAILER_TRANSPORT_DSN)%'",
                        "              from: 'email@some-mail-server.com'",
                        "              to: 'email@some-mail-server.com'",
                        "              subject: 'Blob notify quota'",
                        "              html_template: 'emails/notify-quota.html.twig'",
                        "          reporting:",
                        "              dsn: '%env(BLOB_MAILER_TRANSPORT_DSN)%'",
                        "              from: 'email@some-mail-server.com'",
                        "              to: 'email@some-mail-server.com'",
                        "              subject: 'Blob file deletion reporting'",
                        "              html_template: 'emails/reporting.html.twig'",
                        ""
                    ],
                    "executable": false
                }
            },
            "ref": "e5bb7a3b8a0ce78849e497af39be8fc2209e0c4a"
        }
    }
}
