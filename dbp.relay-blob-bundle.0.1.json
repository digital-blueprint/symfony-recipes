{
    "manifests": {
        "dbp/relay-blob-bundle": {
            "manifest": {
                "bundles": {
                    "Dbp\\Relay\\BlobBundle\\DbpRelayBlobBundle": [
                        "all"
                    ]
                },
                "copy-from-recipe": {
                    "config/": "%CONFIG_DIR%/"
                },
                "env": {
                    "BLOB_DATABASE_URL": "mysql://user:secret@mariadb:3306/db",
                    "BLOB_REPORTING_INTERVAL": "0 11 * * MON",
                    "BLOB_MAILER_TRANSPORT_DSN": "sendmail://default"
                }
            },
            "files": {
                "config/packages/dbp_relay_blob.yaml": {
                    "contents": [
                        "dbp_relay_blob:",
                        "  database_url: '%env(BLOB_DATABASE_URL)%'",
                        "  reporting_interval: '%env(BLOB_REPORTING_INTERVAL)%'",
                        "  cleanup_interval: '*/5 * * * *'",
                        "  additional_auth: false # no credential flow or other additional auth check required",
                        "  file_integrity_checks: false # if file integrity checks should be performed periodically",
                        "  integrity_check_interval: \"0 0 1 * *\" # when integrity check cronjob should run",
                        "  bucket_size_check_interval: \"0 2 * * 1\" # when bucket size check cronjob should run",
                        "  buckets:",
                        "      test_bucket:",
                        "          service: 'Dbp\\Relay\\BlobConnectorFilesystemBundle\\Service\\FilesystemService'",
                        "          internal_bucket_id: '018e0ed8-e6d7-794f-8f60-42efe27ef49e'",
                        "          bucket_id: 'test-bucket'",
                        "          key: 'oaYdaVWxSF8qSk73ewCMQktKhvriYSxvPBudrUQ5qSmFt334FfebTfmQZmFLaruB'",
                        "          quota: 500 # in MB",
                        "          quota_warning_interval: \"0 7 * * *\"",
                        "          notify_when_quota_over: 70 # in percent of the quota",
                        "          report_when_expiry_in: 'P62D' # in Days, 62 = two 31 day months",
                        "          bucket_owner: 'email@some-mail-server.com'",
                        "          max_retention_duration: 'P60D'",
                        "          link_expire_time: 'PT1M'",
                        "          reporting:",
                        "              dsn: '%env(BLOB_MAILER_TRANSPORT_DSN)%'",
                        "              from: 'email@some-mail-server.com'",
                        "              to: 'email@some-mail-server.com'",
                        "              subject: 'Blob file deletion reporting'",
                        "              html_template: 'emails/reporting.html.twig'",
                        ""
                    ],
                    "executable": false
                }
            },
            "ref": "0440972a4d7fa1c91a8c3b4ec3494e11d5804763"
        }
    }
}
